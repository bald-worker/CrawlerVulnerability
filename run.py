# -*- coding: UTF-8 -*-
from log import CveLog, CweLog
import schedule
import cve
import cwe
import time

cve_log = CveLog()
cwe_log = CweLog()


if __name__ == '__main__':
    # 先检查更新，有更新则完成更新
    cve.main(cve_log)
    cwe.main(cwe_log)
    cve_log.info("cve监听启动")
    cwe_log.info("cwe监听启动")
    schedule.every().wednesday.at("05:30").do(cve.main, cve_log)
    schedule.every().wednesday.at("06:30").do(cwe.main, cwe_log)

    # 定时每周1更新
    while True:
        schedule.run_pending()
        time.sleep(5)
